###############################################################################
#
# IAR ANSI C/C++ Compiler V7.10.1.6676/W32 for ARM        18/Jul/2019  11:14:58
# Copyright 1999-2014 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\Src\mks_touch_screen.c
#    Command line =  
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\Src\mks_touch_screen.c
#        -D USE_HAL_DRIVER -D STM32F407xx -D STM32F40_41xxx -D USE_HAL_LIB -D
#        MKS_DLP_BOARD -D TFT35 -lC
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM\mksDLP/List\ -lA
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM\mksDLP/List\
#        --diag_suppress Pa050 -o
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM\mksDLP/Obj\
#        --no_unroll --no_inline --no_tbaa --no_scheduling --debug
#        --endian=little --cpu=Cortex-M4F -e --char_is_signed --fpu=VFPv4_sp
#        --dlib_config "C:\Program Files (x86)\IAR Systems\Embedded Workbench
#        7.0\arm\INC\c\DLib_Config_Full.h" -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Inc\ -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Src\ -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Drivers/STM32F4xx_HAL_Driver/Inc\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Drivers/STM32F4xx_HAL_Driver/Inc/Legacy\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/Third_Party/FatFs/src/drivers\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/ST/STM32_USB_Host_Library/Core/Inc\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/ST/STM32_USB_Host_Library/Class/MSC/Inc\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Drivers/CMSIS/Device/ST/STM32F4xx/Include\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/Third_Party/FatFs/src\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/Third_Party/Marlin\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Drivers/CMSIS/Include\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Drivers/BSP/variant\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Drivers/BSP/Components/at24cxx\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Drivers/BSP/Components/w25qxx\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Drivers/BSP/Components/ssd2828\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Drivers/BSP/Components/lcd\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Drivers/libstmf4\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Drivers/libstmf4/include\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/arduino/stm32/cores/arduino\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/gui\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/gui/GUI/ConvertColor\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/gui/GUI/ConvertMono\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/gui/GUI/Core\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/gui/GUI/Font\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/gui/AntiAlias\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/gui/GUI/GUIDemo\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/gui/GUI/LCDDriver\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/gui/GUI/MemDev\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/gui/GUI/MultiLayer\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/gui/GUI/Widget\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/gui/GUI/WM\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/gui/GUI_X\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../Middlewares/gui/Config\
#        -I E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../User/ui\ -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../User/ui/Multi_language\
#        -I
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM/../User/ui/QRENCODE\
#        -Om --use_c++_inline -I "C:\Program Files (x86)\IAR Systems\Embedded
#        Workbench 7.0\arm\CMSIS\Include\"
#    List file    =  
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM\mksDLP/List\mks_touch_screen.lst
#    Object file  =  
#        E:\DLP_Proj\DLP_source\branches\DLP_opensource\EWARM\mksDLP/Obj\mks_touch_screen.o
#
###############################################################################

E:\DLP_Proj\DLP_source\branches\DLP_opensource\Src\mks_touch_screen.c
      1          #include "mks_touch_screen.h"
      2          #include "stm32f4xx.h" 
      3          #include <stdio.h>
      4          #include "stm32f4xx_it.h"
      5          #include "ili9488.h"
      6          #include "tim.h"
      7          #include "stm32f4xx_spi.h"

  #define IS_SPI_MODE(MODE) (((MODE) == SPI_Mode_Master) || \
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",173  Warning[Pe047]: 
          incompatible redefinition of macro "IS_SPI_MODE" (declared at line
          511 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define IS_SPI_DATASIZE(DATASIZE) (((DATASIZE) == SPI_DataSize_16b) || \
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",185  Warning[Pe047]: 
          incompatible redefinition of macro "IS_SPI_DATASIZE" (declared at
          line 523 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define IS_SPI_CPOL(CPOL) (((CPOL) == SPI_CPOL_Low) || \
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",197  Warning[Pe047]: 
          incompatible redefinition of macro "IS_SPI_CPOL" (declared at line
          526 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define IS_SPI_CPHA(CPHA) (((CPHA) == SPI_CPHA_1Edge) || \
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",209  Warning[Pe047]: 
          incompatible redefinition of macro "IS_SPI_CPHA" (declared at line
          529 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define IS_SPI_NSS(NSS) (((NSS) == SPI_NSS_Soft) || \
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",221  Warning[Pe047]: 
          incompatible redefinition of macro "IS_SPI_NSS" (declared at line
          532 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define IS_SPI_BAUDRATE_PRESCALER(PRESCALER) (((PRESCALER) == SPI_BaudRatePrescaler_2) || \
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",239  Warning[Pe047]: 
          incompatible redefinition of macro "IS_SPI_BAUDRATE_PRESCALER"
          (declared at line 536 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define IS_SPI_FIRST_BIT(BIT) (((BIT) == SPI_FirstBit_MSB) || \
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",257  Warning[Pe047]: 
          incompatible redefinition of macro "IS_SPI_FIRST_BIT" (declared at
          line 545 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define IS_SPI_DIRECTION(DIRECTION) (((DIRECTION) == SPI_Direction_Rx) || \
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",400  Warning[Pe047]: 
          incompatible redefinition of macro "IS_SPI_DIRECTION" (declared at
          line 514 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define SPI_FLAG_CRCERR                 ((uint16_t)0x0010)
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",442  Warning[Pe047]: 
          incompatible redefinition of macro "SPI_FLAG_CRCERR" (declared at
          line 293 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define SPI_FLAG_MODF                   ((uint16_t)0x0020)
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",443  Warning[Pe047]: 
          incompatible redefinition of macro "SPI_FLAG_MODF" (declared at line
          294 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define IS_SPI_CRC_POLYNOMIAL(POLYNOMIAL) ((POLYNOMIAL) >= 0x1)
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",462  Warning[Pe047]: 
          incompatible redefinition of macro "IS_SPI_CRC_POLYNOMIAL" (declared
          at line 554 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define SPI_IT_TXE                   SPI_I2S_IT_TXE
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",473  Warning[Pe047]: 
          incompatible redefinition of macro "SPI_IT_TXE" (declared at line
          280 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define SPI_IT_RXNE                  SPI_I2S_IT_RXNE
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",474  Warning[Pe047]: 
          incompatible redefinition of macro "SPI_IT_RXNE" (declared at line
          281 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define SPI_IT_ERR                   SPI_I2S_IT_ERR
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",475  Warning[Pe047]: 
          incompatible redefinition of macro "SPI_IT_ERR" (declared at line
          282 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define SPI_FLAG_RXNE                SPI_I2S_FLAG_RXNE
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",477  Warning[Pe047]: 
          incompatible redefinition of macro "SPI_FLAG_RXNE" (declared at line
          290 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define SPI_FLAG_TXE                 SPI_I2S_FLAG_TXE
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",478  Warning[Pe047]: 
          incompatible redefinition of macro "SPI_FLAG_TXE" (declared at line
          291 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define SPI_FLAG_OVR                 SPI_I2S_FLAG_OVR
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",479  Warning[Pe047]: 
          incompatible redefinition of macro "SPI_FLAG_OVR" (declared at line
          295 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")

  #define SPI_FLAG_BSY                 SPI_I2S_FLAG_BSY
          ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\libstmf4\include\stm32f4xx_spi.h",480  Warning[Pe047]: 
          incompatible redefinition of macro "SPI_FLAG_BSY" (declared at line
          292 of
          "E:\DLP_Proj\DLP_source\branches\DLP_opensource\Drivers\STM32F4xx_HAL
          _Driver\Inc\stm32f4xx_hal_spi.h")
      8          #include "spi_flash.h"
      9          
     10          extern u16 DeviceCode;
     11          
     12          

   \                                 In section .bss, align 4
     13          static int16_t x_touch,  y_touch;
   \                     x_touch:
   \   00000000                      DS8 2
   \   00000002                      DS8 2
   \   00000004                      DS8 4
     14          
     15          static int32_t touch_time = 0;
     16          
     17          static uint8_t lastTouchState = PEN_UP;
     18          
     19          #define  times  4
     20          
     21          // A/D 通道选择命令字和工作寄存器
     22          #define	CHX 	0x90//0x90 	//通道Y+的选择控制字	//0x94
     23          #define	CHY 	0xD0//0xd0	//通道X+的选择控制字	//0xD4
     24          
     25          
     26          static void LCD_BIG_POINT(u16 xScreen, u16 yScreen)
     27           {
     28             ili9320_SetPoint(xScreen, yScreen, Magenta);
     29             ili9320_SetPoint(xScreen-1, yScreen, Magenta);
     30             ili9320_SetPoint(xScreen+1, yScreen, Magenta);
     31             ili9320_SetPoint(xScreen, yScreen-1, Magenta);
     32             ili9320_SetPoint(xScreen, yScreen+1, Magenta);
     33             ili9320_SetPoint(xScreen-1, yScreen-1, Magenta);
     34             ili9320_SetPoint(xScreen-1, yScreen+1, Magenta);
     35             ili9320_SetPoint(xScreen+1, yScreen-1, Magenta);
     36             ili9320_SetPoint(xScreen+1, yScreen+1, Magenta);
     37          
     38            }
     39          
     40          /*=====================================================================*/

   \                                 In section .text, align 2, keep-with-next
     41          u16 _AD2Y(u16 adx) //240
     42          {
     43            u16 sx=0;
     44            int r = adx - 200;
     45            r *= 240;
     46            sx=r / (4000 - 280);
   \                     _AD2Y: (+1)
   \   00000000   0x38C8             SUBS     R0,R0,#+200
   \   00000002   0xEBC0 0x1100      RSB      R1,R0,R0, LSL #+4
   \   00000006   0x0108             LSLS     R0,R1,#+4
   \   00000008   0xF640 0x6188      MOVW     R1,#+3720
   \   0000000C   0xFB90 0xF0F1      SDIV     R0,R0,R1
     47            if (sx<=0 || sx>240)
   \   00000010   0xB280             UXTH     R0,R0
   \   00000012   0x2800             CMP      R0,#+0
   \   00000014   0xD001             BEQ.N    ??_AD2Y_0
   \   00000016   0x28F1             CMP      R0,#+241
   \   00000018   0xDB00             BLT.N    ??_AD2Y_1
     48              return 0;
   \                     ??_AD2Y_0: (+1)
   \   0000001A   0x2000             MOVS     R0,#+0
     49            return sx;
   \                     ??_AD2Y_1: (+1)
   \   0000001C   0x4770             BX       LR               ;; return
     50          }
     51          
     52          

   \                                 In section .text, align 2, keep-with-next
     53          u16 _AD2X(u16 ady) //320
     54          {
     55            u16 sy=0;
     56            int r = ady - 260;
     57            r *= 320;
     58            sy=r/(3960 - 360);
   \                     _AD2X: (+1)
   \   00000000   0xF5A0 0x7082      SUB      R0,R0,#+260
   \   00000004   0xEB00 0x0180      ADD      R1,R0,R0, LSL #+2
   \   00000008   0x0188             LSLS     R0,R1,#+6
   \   0000000A   0xF44F 0x6161      MOV      R1,#+3600
   \   0000000E   0xFB90 0xF0F1      SDIV     R0,R0,R1
     59            if (sy<=0 || sy>320)
   \   00000012   0xB280             UXTH     R0,R0
   \   00000014   0x2800             CMP      R0,#+0
   \   00000016   0xD002             BEQ.N    ??_AD2X_0
   \   00000018   0xF5B0 0x7FA0      CMP      R0,#+320
   \   0000001C   0xDD00             BLE.N    ??_AD2X_1
     60              return 0;
   \                     ??_AD2X_0: (+1)
   \   0000001E   0x2000             MOVS     R0,#+0
     61            return sy;
   \                     ??_AD2X_1: (+1)
   \   00000020   0x4770             BX       LR               ;; return
     62          }
     63          

   \                                 In section .text, align 2, keep-with-next
     64          static void ADS7843_Rd_Addata(u16 *X_Addata,u16 *Y_Addata)
     65          {
   \                     ADS7843_Rd_Addata: (+1)
   \   00000000   0xB5F0             PUSH     {R4-R7,LR}
   \   00000002   0xB085             SUB      SP,SP,#+20
   \   00000004   0x4604             MOV      R4,R0
   \   00000006   0x460D             MOV      R5,R1
     66          
     67          	u16		i,j,k,x_addata[times],y_addata[times];
     68              int result;
                         ^
Warning[Pe550]: variable "result" was set but never used
     69          
     70                  
     71          	for(i=0;i<times;i++)					//采样4次.
   \   00000008   0x2600             MOVS     R6,#+0
   \   0000000A   0x....             LDR.N    R7,??DataTable1  ;; 0x424182ac
   \   0000000C   0xE014             B.N      ??ADS7843_Rd_Addata_0
     72          	{
     73          #if defined(MKS_DLP_BOARD)  	
     74          		ADS7843_CS = 0;
   \                     ??ADS7843_Rd_Addata_1: (+1)
   \   0000000E   0x2000             MOVS     R0,#+0
   \   00000010   0x6038             STR      R0,[R7, #+0]
     75          		SPI2_ReadWriteByte(CHX);
   \   00000012   0x2090             MOVS     R0,#+144
   \   00000014   0x.... 0x....      BL       SPI2_ReadWriteByte
     76          		y_addata[i] = SPI2_ReadWrite2Bytes();
   \   00000018   0x.... 0x....      BL       SPI2_ReadWrite2Bytes
   \   0000001C   0xA900             ADD      R1,SP,#+0
   \   0000001E   0xF821 0x0016      STRH     R0,[R1, R6, LSL #+1]
     77          		SPI2_ReadWriteByte(CHY);
   \   00000022   0x20D0             MOVS     R0,#+208
   \   00000024   0x.... 0x....      BL       SPI2_ReadWriteByte
     78          		x_addata[i] = SPI2_ReadWrite2Bytes(); 
   \   00000028   0x.... 0x....      BL       SPI2_ReadWrite2Bytes
   \   0000002C   0xA902             ADD      R1,SP,#+8
   \   0000002E   0xF821 0x0016      STRH     R0,[R1, R6, LSL #+1]
     79          		ADS7843_CS = 1;
   \   00000032   0x2001             MOVS     R0,#+1
   \   00000034   0x6038             STR      R0,[R7, #+0]
     80          #endif
     81          	}
   \   00000036   0x1C76             ADDS     R6,R6,#+1
   \                     ??ADS7843_Rd_Addata_0: (+1)
   \   00000038   0x2E04             CMP      R6,#+4
   \   0000003A   0xDBE8             BLT.N    ??ADS7843_Rd_Addata_1
     82          
     83          	result = x_addata[0];
     84          	for(i=0;i<times;i++)					
   \   0000003C   0x2000             MOVS     R0,#+0
   \   0000003E   0xA902             ADD      R1,SP,#+8
   \   00000040   0xE00E             B.N      ??ADS7843_Rd_Addata_2
     85          	{
     86          		for(j = i + 1; j < times; j++)
     87          		{
     88          			if(x_addata[j] > x_addata[i])
   \                     ??ADS7843_Rd_Addata_3: (+1)
   \   00000042   0xF831 0x2013      LDRH     R2,[R1, R3, LSL #+1]
   \   00000046   0xF831 0x6010      LDRH     R6,[R1, R0, LSL #+1]
   \   0000004A   0x4296             CMP      R6,R2
   \   0000004C   0xD203             BCS.N    ??ADS7843_Rd_Addata_4
     89          			{
     90          				k = x_addata[j];
     91          				x_addata[j] = x_addata[i];
   \   0000004E   0xF821 0x6013      STRH     R6,[R1, R3, LSL #+1]
     92          				x_addata[i] = k;
   \   00000052   0xF821 0x2010      STRH     R2,[R1, R0, LSL #+1]
     93          			}
     94          		}
   \                     ??ADS7843_Rd_Addata_4: (+1)
   \   00000056   0x1C5B             ADDS     R3,R3,#+1
   \   00000058   0xB29B             UXTH     R3,R3
   \                     ??ADS7843_Rd_Addata_5: (+1)
   \   0000005A   0x2B04             CMP      R3,#+4
   \   0000005C   0xDBF1             BLT.N    ??ADS7843_Rd_Addata_3
   \   0000005E   0x4638             MOV      R0,R7
   \                     ??ADS7843_Rd_Addata_2: (+1)
   \   00000060   0x2804             CMP      R0,#+4
   \   00000062   0xDA03             BGE.N    ??ADS7843_Rd_Addata_6
   \   00000064   0x1C47             ADDS     R7,R0,#+1
   \   00000066   0xB2BF             UXTH     R7,R7
   \   00000068   0x463B             MOV      R3,R7
   \   0000006A   0xE7F6             B.N      ??ADS7843_Rd_Addata_5
     95          	}
     96          	if(x_addata[times / 2 -1] - x_addata[times / 2 ] > 50)
   \                     ??ADS7843_Rd_Addata_6: (+1)
   \   0000006C   0x8888             LDRH     R0,[R1, #+4]
   \   0000006E   0x8849             LDRH     R1,[R1, #+2]
   \   00000070   0x1A0A             SUBS     R2,R1,R0
   \   00000072   0x2A33             CMP      R2,#+51
   \   00000074   0xDA21             BGE.N    ??ADS7843_Rd_Addata_7
     97          	{
     98                      *X_Addata = 0;
     99                      *Y_Addata = 0;
    100                      return ;
    101                  }
    102          
    103          	*X_Addata = (x_addata[times / 2 -1] + x_addata[times / 2 ]) /2;
   \   00000076   0x1840             ADDS     R0,R0,R1
   \   00000078   0xEB00 0x70D0      ADD      R0,R0,R0, LSR #+31
   \   0000007C   0x1040             ASRS     R0,R0,#+1
   \   0000007E   0x8020             STRH     R0,[R4, #+0]
    104          
    105          	
    106          	result = y_addata[0];
    107          	for(i=0;i<times;i++)					
   \   00000080   0x2000             MOVS     R0,#+0
   \   00000082   0xA900             ADD      R1,SP,#+0
   \   00000084   0xE00E             B.N      ??ADS7843_Rd_Addata_8
    108          	{
    109          		for(j = i + 1; j < times; j++)
    110          		{
    111          			if(y_addata[j] > y_addata[i])
   \                     ??ADS7843_Rd_Addata_9: (+1)
   \   00000086   0xF831 0x2013      LDRH     R2,[R1, R3, LSL #+1]
   \   0000008A   0xF831 0x6010      LDRH     R6,[R1, R0, LSL #+1]
   \   0000008E   0x4296             CMP      R6,R2
   \   00000090   0xD203             BCS.N    ??ADS7843_Rd_Addata_10
    112          			{
    113          				k = y_addata[j];
    114          				y_addata[j] = y_addata[i];
   \   00000092   0xF821 0x6013      STRH     R6,[R1, R3, LSL #+1]
    115          				y_addata[i] = k;
   \   00000096   0xF821 0x2010      STRH     R2,[R1, R0, LSL #+1]
    116          			}
    117          		}
   \                     ??ADS7843_Rd_Addata_10: (+1)
   \   0000009A   0x1C5B             ADDS     R3,R3,#+1
   \   0000009C   0xB29B             UXTH     R3,R3
   \                     ??ADS7843_Rd_Addata_11: (+1)
   \   0000009E   0x2B04             CMP      R3,#+4
   \   000000A0   0xDBF1             BLT.N    ??ADS7843_Rd_Addata_9
   \   000000A2   0x4638             MOV      R0,R7
   \                     ??ADS7843_Rd_Addata_8: (+1)
   \   000000A4   0x2804             CMP      R0,#+4
   \   000000A6   0xDA03             BGE.N    ??ADS7843_Rd_Addata_12
   \   000000A8   0x1C47             ADDS     R7,R0,#+1
   \   000000AA   0xB2BF             UXTH     R7,R7
   \   000000AC   0x463B             MOV      R3,R7
   \   000000AE   0xE7F6             B.N      ??ADS7843_Rd_Addata_11
    118          	}
    119          
    120          	
    121          	if(y_addata[times / 2 -1] - y_addata[times / 2 ] > 50)
   \                     ??ADS7843_Rd_Addata_12: (+1)
   \   000000B0   0x8888             LDRH     R0,[R1, #+4]
   \   000000B2   0x8849             LDRH     R1,[R1, #+2]
   \   000000B4   0x1A0A             SUBS     R2,R1,R0
   \   000000B6   0x2A33             CMP      R2,#+51
   \   000000B8   0xDB03             BLT.N    ??ADS7843_Rd_Addata_13
    122          	{
    123                      *X_Addata = 0;
   \                     ??ADS7843_Rd_Addata_7: (+1)
   \   000000BA   0x2000             MOVS     R0,#+0
   \   000000BC   0x8020             STRH     R0,[R4, #+0]
    124                      *Y_Addata = 0;
   \   000000BE   0x8028             STRH     R0,[R5, #+0]
    125                      return ;
   \   000000C0   0xE004             B.N      ??ADS7843_Rd_Addata_14
    126                  }
    127          
    128          	*Y_Addata = (y_addata[times / 2 -1] + y_addata[times / 2 ]) /2;
   \                     ??ADS7843_Rd_Addata_13: (+1)
   \   000000C2   0x1840             ADDS     R0,R0,R1
   \   000000C4   0xEB00 0x70D0      ADD      R0,R0,R0, LSR #+31
   \   000000C8   0x1040             ASRS     R0,R0,#+1
   \   000000CA   0x8028             STRH     R0,[R5, #+0]
    129          	
    130          	
    131          }
   \                     ??ADS7843_Rd_Addata_14: (+1)
   \   000000CC   0xB005             ADD      SP,SP,#+20
   \   000000CE   0xBDF0             POP      {R4-R7,PC}       ;; return
    132          
    133          /*=====================================================================*/
    134          /*=====================================================================*/
    135          /*=====================================================================*/

   \                                 In section .text, align 2, keep-with-next
    136          u16 distence(u16 data1,u16 data2)
    137          {
    138              if((data1 > data2) && (data1 > data2 + 10))
   \                     distence: (+1)
   \   00000000   0x4281             CMP      R1,R0
   \   00000002   0xD204             BCS.N    ??distence_0
   \   00000004   0x310A             ADDS     R1,R1,#+10
   \   00000006   0x4281             CMP      R1,R0
   \   00000008   0xDA01             BGE.N    ??distence_0
    139              {
    140                  return 0;
    141              }
    142          
    143              if((data2 > data2) && (data2 > data2 + 10))
    144              {
    145                  return 0;
   \   0000000A   0x2000             MOVS     R0,#+0
   \   0000000C   0x4770             BX       LR
    146              }
    147          
    148              return 1;    
   \                     ??distence_0: (+1)
   \   0000000E   0x2001             MOVS     R0,#+1
   \   00000010   0x4770             BX       LR               ;; return
    149          }
    150          #define ADC_VALID_OFFSET	10
    151          

   \                                 In section .text, align 2, keep-with-next
    152          static uint8_t	TOUCH_PressValid(uint16_t _usX, uint16_t _usY)
    153          {
    154          	if ((_usX <= ADC_VALID_OFFSET) || (_usY <= ADC_VALID_OFFSET)
    155          		|| (_usX >= 4095 - ADC_VALID_OFFSET)
    156          		|| (_usY >= 4095 - ADC_VALID_OFFSET))
   \                     TOUCH_PressValid: (+1)
   \   00000000   0x280B             CMP      R0,#+11
   \   00000002   0xDB07             BLT.N    ??TOUCH_PressValid_0
   \   00000004   0x290B             CMP      R1,#+11
   \   00000006   0xDB05             BLT.N    ??TOUCH_PressValid_0
   \   00000008   0xF640 0x72F5      MOVW     R2,#+4085
   \   0000000C   0x4290             CMP      R0,R2
   \   0000000E   0xDA01             BGE.N    ??TOUCH_PressValid_0
   \   00000010   0x4291             CMP      R1,R2
   \   00000012   0xDB01             BLT.N    ??TOUCH_PressValid_1
    157          	{
    158          		return 0;
   \                     ??TOUCH_PressValid_0: (+1)
   \   00000014   0x2000             MOVS     R0,#+0
   \   00000016   0x4770             BX       LR
    159          	}
    160          	else
    161          	{
    162          		return 1;
   \                     ??TOUCH_PressValid_1: (+1)
   \   00000018   0x2001             MOVS     R0,#+1
   \   0000001A   0x4770             BX       LR               ;; return
    163          	}
    164          }
    165          

   \                                 In section .text, align 2, keep-with-next
    166          void getTouchEvent(TOUCH_EVENT *pTouchEvent)
    167          {
   \                     getTouchEvent: (+1)
   \   00000000   0xE92D 0x43F8      PUSH     {R3-R9,LR}
   \   00000004   0x4604             MOV      R4,R0
    168          	uint32_t tmpTime, diffTime = 0;
    169          	int16_t x, y;
    170          	
    171          	tmpTime = getTick();
   \   00000006   0x.... 0x....      BL       getTick
   \   0000000A   0x4605             MOV      R5,R0
    172          
    173          	diffTime = getTickDiff(tmpTime, touch_time);
    174          
    175          	if(diffTime > 20)
   \   0000000C   0x....             LDR.N    R6,??DataTable1_1
   \   0000000E   0x6871             LDR      R1,[R6, #+4]
   \   00000010   0x.... 0x....      BL       getTickDiff
   \   00000014   0x2815             CMP      R0,#+21
   \   00000016   0xD32E             BCC.N    ??getTouchEvent_0
    176          	{
    177          		x = x_touch;
   \   00000018   0xF9B6 0x8000      LDRSH    R8,[R6, #+0]
    178          		y = y_touch;
   \   0000001C   0xF9B6 0x7002      LDRSH    R7,[R6, #+2]
    179          			
    180          		ADS7843_Rd_Addata(&x_touch, &y_touch);
                 		                  ^
Warning[Pe167]: argument of type "int16_t *" is incompatible with parameter of
          type "u16 *"

  		ADS7843_Rd_Addata(&x_touch, &y_touch);
  		                            ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Src\mks_touch_screen.c",180  Warning[Pe167]: 
          argument of type "int16_t *" is incompatible with parameter of type
          "u16 *"
   \   00000020   0x1CB1             ADDS     R1,R6,#+2
   \   00000022   0x4630             MOV      R0,R6
   \   00000024   0x.... 0x....      BL       ADS7843_Rd_Addata
    181          		if(TOUCH_PressValid(x_touch, y_touch))
   \   00000028   0xF9B6 0x9000      LDRSH    R9,[R6, #+0]
   \   0000002C   0x8871             LDRH     R1,[R6, #+2]
   \   0000002E   0x4648             MOV      R0,R9
   \   00000030   0xB280             UXTH     R0,R0
   \   00000032   0x.... 0x....      BL       TOUCH_PressValid
   \   00000036   0x2800             CMP      R0,#+0
   \   00000038   0xD01B             BEQ.N    ??getTouchEvent_1
    182          		{			
    183          			if(abs(x - x_touch) > 50 || abs(y-y_touch) > 50)
                 			   ^
Warning[Pe223]: function "abs" declared implicitly

  static uint8_t lastTouchState = PEN_UP;
                 ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Src\mks_touch_screen.c",17  Warning[Pe177]: 
          variable "lastTouchState" was declared but never referenced

  static void LCD_BIG_POINT(u16 xScreen, u16 yScreen)
              ^
"E:\DLP_Proj\DLP_source\branches\DLP_opensource\Src\mks_touch_screen.c",26  Warning[Pe177]: 
          function "LCD_BIG_POINT" was declared but never referenced
   \   0000003A   0xEBA8 0x0009      SUB      R0,R8,R9
   \   0000003E   0x.... 0x....      BL       abs
   \   00000042   0x2833             CMP      R0,#+51
   \   00000044   0xDA17             BGE.N    ??getTouchEvent_0
   \   00000046   0xF9B6 0x0002      LDRSH    R0,[R6, #+2]
   \   0000004A   0x1A38             SUBS     R0,R7,R0
   \   0000004C   0x.... 0x....      BL       abs
   \   00000050   0x2833             CMP      R0,#+51
   \   00000052   0xDA10             BGE.N    ??getTouchEvent_0
    184          			{
    185          				return;
    186          			}
    187          		
    188          			pTouchEvent->x  = (x + x_touch) >> 1;
   \   00000054   0xF9B6 0x0000      LDRSH    R0,[R6, #+0]
   \   00000058   0xFA08 0xF080      SXTAH    R0,R8,R0
   \   0000005C   0x1040             ASRS     R0,R0,#+1
   \   0000005E   0x8020             STRH     R0,[R4, #+0]
    189          			pTouchEvent->y = (y + y_touch) >> 1;
   \   00000060   0xF9B6 0x0002      LDRSH    R0,[R6, #+2]
   \   00000064   0x1838             ADDS     R0,R7,R0
   \   00000066   0x1040             ASRS     R0,R0,#+1
   \   00000068   0x8060             STRH     R0,[R4, #+2]
    190          			pTouchEvent->state = PEN_DOWN;
   \   0000006A   0x2001             MOVS     R0,#+1
   \   0000006C   0x7120             STRB     R0,[R4, #+4]
    191          			
    192          			touch_time = tmpTime;
   \   0000006E   0x6075             STR      R5,[R6, #+4]
   \   00000070   0xE001             B.N      ??getTouchEvent_0
    193          		}
    194          		else
    195          		{
    196          			pTouchEvent->state = PEN_UP;
   \                     ??getTouchEvent_1: (+1)
   \   00000072   0x2002             MOVS     R0,#+2
   \   00000074   0x7120             STRB     R0,[R4, #+4]
    197          		}
    198          	}
    199          	else
    200          	{
    201          		
    202          	}
    203          
    204          }
   \                     ??getTouchEvent_0: (+1)
   \   00000076   0xE8BD 0x83F1      POP      {R0,R4-R9,PC}    ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1:
   \   00000000   0x424182AC         DC32     0x424182ac

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable1_1:
   \   00000000   0x........         DC32     x_touch
    205          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      40   ADS7843_Rd_Addata
        40   -> SPI2_ReadWrite2Bytes
        40   -> SPI2_ReadWriteByte
       0   TOUCH_PressValid
       0   _AD2X
       0   _AD2Y
       0   distence
      32   getTouchEvent
        32   -> ADS7843_Rd_Addata
        32   -> TOUCH_PressValid
        32   -> abs
        32   -> getTick
        32   -> getTickDiff


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable1
       4  ??DataTable1_1
     208  ADS7843_Rd_Addata
      28  TOUCH_PressValid
      34  _AD2X
      30  _AD2Y
      18  distence
     122  getTouchEvent
       8  x_touch
          y_touch
          touch_time

 
   8 bytes in section .bss
 448 bytes in section .text
 
 448 bytes of CODE memory
   8 bytes of DATA memory

Errors: none
Warnings: 24
